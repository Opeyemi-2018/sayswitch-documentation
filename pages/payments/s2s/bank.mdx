## Bank Payments (S2S)

### Overview

Process bank transfers securely through Sayswitch's Server-to-Server (S2S) API. This integration enables direct bank payments without redirecting customers to external banking platforms.

### Bank Payment Flow

1. Initialize bank payment request
2. Validate bank account details
3. Process bank transfer
4. Handle payment confirmation

### Basic Implementation

```javascript
const sayswitch = new Sayswitch({
  secretKey: process.env.SAYSWITCH_SECRET_KEY
});

// Process bank payment
const bankPayment = await sayswitch.s2s.bank.transfer({
  amount: 10000, // Amount in cents
  currency: 'USD',
  bank_account: {
    account_number: '0123456789',
    bank_code: 'CITI',
    account_name: 'John Doe'
  },
  customer: {
    email: 'customer@example.com',
    reference: 'CUST_123'
  },
  narration: 'Payment for Order #123'
});
```

### Account Validation

```javascript
const validateAccount = async () => {
  const verification = await sayswitch.s2s.bank.verifyAccount({
    account_number: '0123456789',
    bank_code: 'CITI'
  });

  return verification.account_name;
};
```

### Test Bank Details

| Bank Code | Account Number | Description |
|-----------|---------------|-------------|
| CITI | 0123456789 | Successful transfer |
| CHASE | 9876543210 | Failed transfer |
| BOA | 1122334455 | Pending transfer |

### Error Handling

```javascript copy
try {
  const payment = await sayswitch.s2s.bank.transfer({
    // payment details
  });
} catch (error) {
  if (error.code === 'invalid_account') {
    // Handle invalid account
  } else if (error.code === 'insufficient_funds') {
    // Handle insufficient funds
  } else {
    // Handle other errors
  }
}
```

### Security Requirements

1. **Account Verification**
   - Confirm that the account exists  
   - Ensure the account name matches the provided details  
   - Validate the bank code for accuracy  

2. **Transaction Controls**
   - Enforce daily transfer limits  
   - Track transaction frequency to detect unusual activity  
   - Apply fraud detection mechanisms to safeguard transactions  


### Response Codes

| Code | Description |
|------|-------------|
| 0000 | Success |
| 2000 | Invalid account |
| 2001 | Insufficient funds |
| 2002 | Bank not available |
| 2003 | Transfer failed |

### Best Practices
- Perform account detail validation before initiating a transfer  
- Use idempotency keys to handle retries safely and prevent duplicate transfers  
- Save transaction references for tracking and reconciliation  
- Continuously monitor the status of each transfer to ensure completion  
- Set up webhook listeners to automatically handle transfer updates and notifications  




For technical support, contact our team at support@sayswitch.com